# Automatically generated by Updater v1.0
# @author Daniel J. Finnegan

# The hand tracker library requires:
# - The Kinect SDK: See this gist -> https://gist.github.com/UnaNancyOwen/b7f8a543c3fa91a1a407
# - Boost: Default FindBoost module. Boost version downloaded from the windows builds forum -> https://dl.bintray.com/boostorg/release/1.67.0/binaries/boost_1_67_0-msvc-10.0-64.exe
# - OpenCV: Simply download the latest release 2.4 from the Github repository and store it into the ./dependencies folder -> https://github.com/opencv/opencv/releases/download/2.4.13.6/opencv-2.4.13.6-vc14.exe

find_package (
	OpenCV
	REQUIRED
	PATHS
		"${CMAKE_SOURCE_DIR}/dependencies/opencv/build" # You might need to changes this based on future releases of OpenCV. If you do, come talk to me as we need to adapt this file to make things future-proof!
)

# Simply uses the baked in find facility for boost
set (
	BOOSTROOT
	"${CMAKE_SOURCE_DIR}/dependencies/boost_1_67_0"
)

find_package (
	Boost
	1.67
	REQUIRED
)

# Downloaded from here: https://www.microsoft.com/en-us/download/details.aspx?id=44561
list (
	APPEND
	CMAKE_MODULE_PATH
	"${CMAKE_SOURCE_DIR}/cmake"
)

find_package (
	KinectSDK2
	REQUIRED
)

set (
	HANDTRACKER_SOURCES
	"HandTrackerLib.cpp"
	"HandTracker.cpp"
	"Hand.cpp"
	"KinectManager.cpp"
)

set (
	HANDTRACKER_HEADERS
	"include/HandTrackerLib.h"
	"include/HandTracker.h"
	"include/Hand.h"
	"include/KinectManager.h"
	"include/KinectTypes.h"
)

add_library (
	HandTrackerLib
	SHARED
		${HANDTRACKER_SOURCES}
		${HANDTRACKER_HEADERS}
)

target_include_directories (
	HandTrackerLib
	PUBLIC
		"include/"
		${KinectSDK2_INCLUDE_DIRS}
		${Boost_INCLUDE_DIR}
		${OpenCV_INCLUDE_DIRS}
)

link_directories (
	${KinectSDK2_LIBRARY_DIRS}
	${Boost_LIBRARY_DIRS}
#	${OpenCV_LIB_DIR} # According to the OpenCV cmake config file, this is not needed
)

target_link_libraries (
	HandTrackerLib
		${KinectSDK2_LIBRARIES}
		${Boost_LIBRARIES}
		${OpenCV_LIBS}

)

# Install the dll file into the exe directory in the project root directory
install (
	TARGETS
		HandTrackerLib
	RUNTIME
	DESTINATION
		${CMAKE_SOURCE_DIR}/exe
)